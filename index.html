<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive AI Adventure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        html, body { height: 100%; margin: 0; padding: 0; overflow-x: hidden; }
        body { font-family: sans-serif; background-color: #111827; /* Default dark background */ }
        button { margin-left: 10px; padding: 5px 10px; }
        .counter-display { font-weight: bold; }
        #app-background {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-size: cover;
          background-position: center;
          filter: blur(10px) brightness(0.5); /* Darker and more blur */
          z-index: -1;
          transform: scale(1.15); /* Avoid edge artifacts from blur */
          transition: background-image 0.7s ease-in-out;
          background-color: #111827; /* Ensure dark if no image */
        }
        /* Ensure app content is above the background */
        #app {
          position: relative;
          z-index: 1;
          min-height: 100vh; /* Changed to 100vh */
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center; /* Center content for selection screen */
        }
        .collapsed-text {
            max-height: 3em; /* Adjust based on your font size and line height for ~2 lines */
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }
        .collapsed-text::after {
            content: "... more";
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(to right, transparent, #2d3748 50%); /* Adjust gradient color to match narration bg */
            padding-left: 20px;
            font-weight: bold;
            color: #a0aec0; /* Lighter text for "more" */
        }
        .expanded-text {
            max-height: none;
            cursor: pointer;
        }
        .expanded-text::after {
            content: "";
        }
    </style>

    <!-- Import Map: Define aliases for our modules -->
    <script type="importmap">
{
  "imports": {
    "vue": "https://esm.sh/vue@3/dist/vue.esm-bundler.js",
    "@google/genai": "https://esm.sh/@google/genai@^0.9.0",
    "react/": "https://esm.sh/react@^19.1.0/"
  }
}
</script>

<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-gray-900 text-gray-200">
    <div id="app-background"></div>
    <div id="app">
        <!-- Vue app will mount here -->
    </div>
<script type="module" src="/index.tsx"></script>
</body>
</html>